additional_includes:
- ../../../prompts/rewrite_user_input.jinja2
inputs:
  input:
    type: string
    default: 'generate sample inputs for the flow. Each sample should follow the
      patter: {"input1":1, "input2":2}'
  history:
    type: list
    default:
    - "User: Understand the existing flow defined in flow.dag.yaml."
    - "assistant: This flow is designed to rewrite user input. It takes two
      inputs: 'input' and 'history'. The 'input' is a string that the user wants
      to be rewritten, and 'history' is a list of previous interactions. The
      flow consists of two nodes: a prompt node and a python node. The prompt
      node does not take any inputs and generates a prompt for the python node.
      The python node takes several inputs including the user input, the
      history, and the prompt generated by the prompt node. It then rewrites the
      user input and outputs the result."
outputs:
  result:
    type: string
    reference: ${python_node_3s4k.output}
nodes:
- name: prompt_node_vttv
  type: prompt
  source:
    type: code
    path: rewrite_user_input.jinja2
  inputs: {}
- name: python_node_3s4k
  type: python
  source:
    type: code
    path: rewrite_user_input.py
  inputs:
    connection: aoai-eus
    messages: ${inputs.history}
    user_input: ${inputs.input}
    max_history_len: 4
    prompt: ${prompt_node_vttv.output}
    deployment_name: gpt-35-turbo-16k-0613
